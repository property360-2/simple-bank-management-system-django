{% extends 'base.html' %}
{% block title %}Preferences - Settings{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-3">
        <div class="list-group">
            <a href="{% url 'settings:preferences' %}" class="list-group-item list-group-item-action active">
                <i class="fas fa-palette"></i> Preferences
            </a>
            <a href="{% url 'settings:profile_edit' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-user"></i> Edit Profile
            </a>
            <a href="{% url 'settings:profile_edit_otp' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-lock"></i> Profile with OTP
            </a>
            <a href="{% url 'settings:change_password' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-key"></i> Change Password
            </a>
            <a href="{% url 'settings:security' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-shield-alt"></i> Security & Privacy
            </a>
            <a href="{% url 'settings:account_summary' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-credit-card"></i> Account Summary
            </a>
            <a href="{% url 'settings:notifications' %}" class="list-group-item list-group-item-action">
                <i class="fas fa-bell"></i> Notifications
            </a>
        </div>
    </div>

    <div class="col-md-9">
        <div class="card">
            <div class="card-header bg-light">
                <h3 class="card-title mb-0"><i class="fas fa-palette"></i> Preferences & Personalization</h3>
            </div>
            <div class="card-body">
                <form method="POST" class="needs-validation">
                    {% csrf_token %}

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-4">
                                <label class="form-label"><strong><i class="fas fa-moon"></i> Theme</strong></label>
                                <div class="btn-group w-100" role="group">
                                    {% for value, label in form.theme.field.choices %}
                                        <input type="radio" class="btn-check" name="theme" id="theme_{{ value }}" value="{{ value }}" {% if form.theme.value == value %}checked{% endif %}>
                                        <label class="btn btn-outline-primary" for="theme_{{ value }}">{{ label }}</label>
                                    {% endfor %}
                                </div>
                                {% if form.theme.errors %}
                                    <div class="invalid-feedback d-block">{{ form.theme.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-4">
                                <label for="{{ form.font_size.id_for_label }}" class="form-label"><strong><i class="fas fa-text-height"></i> Font Size</strong></label>
                                <select class="form-select" name="font_size" id="{{ form.font_size.id_for_label }}">
                                    {% for value, label in form.font_size.field.choices %}
                                        <option value="{{ value }}" {% if form.font_size.value == value %}selected{% endif %}>{{ label }}</option>
                                    {% endfor %}
                                </select>
                                {% if form.font_size.errors %}
                                    <div class="invalid-feedback d-block">{{ form.font_size.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-4">
                                <label for="{{ form.language.id_for_label }}" class="form-label"><strong><i class="fas fa-language"></i> Language</strong></label>
                                <select class="form-select" name="language" id="{{ form.language.id_for_label }}">
                                    {% for value, label in form.language.field.choices %}
                                        <option value="{{ value }}" {% if form.language.value == value %}selected{% endif %}>{{ label }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-4">
                                <label for="{{ form.currency.id_for_label }}" class="form-label"><strong><i class="fas fa-dollar-sign"></i> Currency</strong></label>
                                <input type="text" class="form-control" name="currency" id="{{ form.currency.id_for_label }}" value="{{ form.currency.value }}" placeholder="USD" maxlength="3">
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="mb-4">
                        <h5><i class="fas fa-bell"></i> Notification Preferences</h5>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="notifications_email" id="{{ form.notifications_email.id_for_label }}" {% if form.notifications_email.value %}checked{% endif %}>
                            <label class="form-check-label" for="{{ form.notifications_email.id_for_label }}">
                                <i class="fas fa-envelope"></i> Email Notifications
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="notifications_sms" id="{{ form.notifications_sms.id_for_label }}" {% if form.notifications_sms.value %}checked{% endif %}>
                            <label class="form-check-label" for="{{ form.notifications_sms.id_for_label }}">
                                <i class="fas fa-sms"></i> SMS Notifications
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="show_balance" id="{{ form.show_balance.id_for_label }}" {% if form.show_balance.value %}checked{% endif %}>
                            <label class="form-check-label" for="{{ form.show_balance.id_for_label }}">
                                <i class="fas fa-eye"></i> Show Balance on Dashboard
                            </label>
                        </div>
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-save"></i> Save Preferences
                        </button>
                        <a href="{% url 'settings:dashboard' %}" class="btn btn-secondary btn-lg">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
