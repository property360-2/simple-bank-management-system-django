{% extends 'base.html' %}
{% load currency_tags %}

{% block title %}Create Savings Goal{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col">
            <h1><i class="fas fa-bullseye text-primary"></i> Create Savings Goal</h1>
            <p class="text-muted">Set a target for your {{ savings_account.product.name }} savings account</p>
        </div>
        <div class="col-auto">
            <a href="{% url 'savings:savings_detail' savings_account.pk %}" class="btn btn-outline-primary" data-loading>
                <i class="fas fa-arrow-left"></i> Back to Account
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary">
                    <h5 class="card-title mb-0">Goal Details</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}

                        <!-- Account Info -->
                        <div class="mb-4 p-3 bg-secondary rounded">
                            <small class="text-muted d-block">Savings Account</small>
                            <strong class="h5">{{ savings_account.product.name }}</strong>
                            <br>
                            <small class="text-muted">{{ savings_account.account_number }}</small>
                        </div>

                        <!-- Goal Name -->
                        <div class="mb-3">
                            <label for="name" class="form-label"><strong>Goal Name</strong></label>
                            <input type="text" class="form-control form-control-lg" id="name" name="name"
                                   placeholder="e.g., Vacation, Emergency Fund, New Car"
                                   required>
                            <small class="form-text text-muted">What are you saving for?</small>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label for="description" class="form-label">Description (Optional)</label>
                            <textarea class="form-control" id="description" name="description"
                                      rows="3"
                                      placeholder="Add any details about your goal..."></textarea>
                        </div>

                        <!-- Target Amount -->
                        <div class="mb-3">
                            <label for="target_amount" class="form-label"><strong>Target Amount</strong></label>
                            <input type="number" class="form-control form-control-lg" id="target_amount" name="target_amount"
                                   placeholder="0.00" min="0.01" step="0.01"
                                   required>
                            <small class="form-text text-muted">How much do you want to save?</small>
                        </div>

                        <!-- Target Date -->
                        <div class="mb-3">
                            <label for="target_date" class="form-label"><strong>Target Date</strong></label>
                            <input type="date" class="form-control form-control-lg" id="target_date" name="target_date"
                                   required>
                            <small class="form-text text-muted">When do you want to reach your goal?</small>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid gap-2 mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-check-circle"></i> Create Goal
                            </button>
                            <a href="{% url 'savings:savings_detail' savings_account.pk %}" class="btn btn-secondary" data-loading>
                                Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Goal Tips Sidebar -->
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary">
                    <h5 class="card-title mb-0">Tips for Setting Goals</h5>
                </div>
                <div class="card-body">
                    <div class="mb-4">
                        <h6 class="mb-2"><i class="fas fa-lightbulb text-warning"></i> Be Specific</h6>
                        <p class="small text-muted">Use clear, measurable goals like "Save $5,000 for vacation" instead of vague goals like "save more".</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="mb-2"><i class="fas fa-hourglass-half text-info"></i> Set a Timeline</h6>
                        <p class="small text-muted">Having a target date helps you stay motivated and track progress toward your goal.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="mb-2"><i class="fas fa-chart-line text-success"></i> Make It Realistic</h6>
                        <p class="small text-muted">Consider your current savings rate and interest earned. Set achievable targets that motivate you.</p>
                    </div>

                    <div>
                        <h6 class="mb-2"><i class="fas fa-check-circle text-primary"></i> Track Progress</h6>
                        <p class="small text-muted">Monitor your goal progress regularly and adjust your savings plan as needed.</p>
                    </div>
                </div>
            </div>

            <!-- Account Stats -->
            <div class="card shadow-sm mt-4">
                <div class="card-header bg-secondary">
                    <h5 class="card-title mb-0">Account Stats</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <small class="text-muted d-block">Current Balance</small>
                        <strong class="h5 text-success">{% format_amount savings_account.balance user=request.user %}</strong>
                    </div>
                    <div class="mb-3">
                        <small class="text-muted d-block">Interest Rate</small>
                        <strong class="h5">{{ savings_account.product.interest_rate }}% APY</strong>
                    </div>
                    <div>
                        <small class="text-muted d-block">Interest Earned</small>
                        <strong class="h5 text-primary">{% format_amount savings_account.interest_earned user=request.user %}</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
